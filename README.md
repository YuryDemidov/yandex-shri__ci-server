# CI build-server and build-agent. Yandex SHRI Homework

Установка:

1. Создать файлы agent-conf.json и server-conf.json в директориях agent и server соответственно на примере аналогичных файлов example (в файле server-conf.json необходимо указать api токен).

2. Запустить билд-сервер:
```shell script
cd server && npm ci && npm start
```

3. Запустить билд-агент:
```shell script
cd agent && npm ci && npm start
```

Если между сборками сервер перестанет получать ответ от агента, он удаляет его из пула агентов и, соответственно, не будет назначать на данного агента сборки. Будут использованы другие билд-агенты.

Если в процессе сборки сервер перестанет получать ответ от агента, он удаляет его и передаёт сборку другому агенту, потому что подразумевается, что билд-агентов несколько и отказ одного из них не должен влиять на процесс CI.

Если билд-агент не смог соединиться с сервером, то агент будет отправлять периодические запросы с попыткой установить соединение. Агент без сборок не имеет смысла, поэтому он будет пытаться соединиться с сервером и начать получать сборки постоянно.

Если билд-агент при отправке результатов сборки не смог соединиться с сервером, он делает несколько попыток повторить это через заданный интервал времени (регулируется в конфиге), если все попытки были безуспешны - он прекращает работу.
